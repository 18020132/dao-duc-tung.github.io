<% if(site.gtag.enable) { %>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=<%- site.gtag.gtagkey %>"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', '<%- site.gtag.gtagkey %>');
</script>
<% } %>

<!-- Google search -->
<script async src="https://cse.google.com/cse.js?cx=3b3c3574614bf1b79"></script>
<script>
  function copyToClipboard(text) {
    var dummy = document.createElement('input');

    document.body.appendChild(dummy);
    dummy.value = text;
    dummy.select();
    document.execCommand('copy');
    document.body.removeChild(dummy);
  }
</script>

<!-- Load logo at last -->
<script>
  // Load logo at last: https://stackoverflow.com/a/2230953
  function pageLoad() {
    var nodeList, index;
    nodeList = document.body.getElementsByTagName('img');

    index = 0;
    backgroundLoader();
    function backgroundLoader() {
      var img, src;
      if (index >= nodeList.length) return;

      img = nodeList[index];
      src = img.getAttribute('data-src');
      if (src) {
        img.src = src;
        img.removeAttribute('data-src');
      }

      ++index;
      window.setTimeout(backgroundLoader, 200);
    }
  }
  window.addEventListener('load', pageLoad, false);
</script>
